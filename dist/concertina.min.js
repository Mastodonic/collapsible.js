!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("concertina.js",[],e):"object"==typeof exports?exports["concertina.js"]=e():t["concertina.js"]=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(1);var l=n(2),c=i(l),u=n(3),h=i(u),d=function(){function t(e){var n=this;if(a(this,t),this.setOptions(e),"string"==typeof this.options.element)this.wrapper=c.default.getNodes(this.options.element)[0];else{if("object"!==s(this.options.element)||!this.options.element.nodeName)throw new Error('Please provide a css selector or a dom node object for the "element" option');this.wrapper=this.options.element}if(!this.wrapper)throw new Error("Wrapper Element could not be found");this.setElement("panels","."+this.options.panelClass),this.setElement("content","."+this.options.contentClass),this.setElement("headers","."+this.options.headerClass),this.setElement("content-inner","."+this.options.contentInnerClass),this.calculateStyles(),this.setListeners(),this.setAccesibility(),this.setTransitionClass(),this.transitionTime=this.getTransitionDuration(),window.onload=function(){n.recalculateHeights(),n.options.hashUrl&&n.loadFromUrlHash()}}return r(t,[{key:"setOptions",value:function(t){var e={element:".c-concertina",transitionClass:"c-concertina--has-transition",panelClass:"c-concertina__panel",activePanelClass:"c-concertina__panel--is-active",headerClass:"c-concertina__header",contentClass:"c-concertina__content",contentInnerClass:"c-concertina__content-inner",hashUrl:!0,scrollToPanelOnClick:"mobile",transition:!0,closeOthers:!0};this.options=o({},e,t)}},{key:"setElement",value:function(t,e){if(this[t]=c.default.getNodes(e,this.wrapper),!this[t].length)throw new Error("Please provide a "+t+" wrapper (default: "+e+") for each accordion item in your html markup")}},{key:"setTransitionClass",value:function(){this.options.transition&&c.default.addClass(this.wrapper,this.options.transitionClass)}},{key:"getTransitionDuration",value:function(){var t=c.default.getStyle(this.content[0],"transition-duration");if("0s"===t&&this.options.transition)throw new Error("You should set transition-duration on the '."+this.options.contentClass+'\' element in your css file or disable transition by setting "transition" option to false in the constructor');return 1e3*t.replace("s","")}},{key:"setListeners",value:function(){var t=this;this.wrapper.addEventListener("click",function(e){return t.handleItemClick(e)}),window.addEventListener("resize",c.default.debounce(function(){return t.handleResize()},300))}},{key:"handleItemClick",value:function(t){var e=t.target;t.preventDefault(),(c.default.hasClass(e,this.options.headerClass)||c.default.hasAncestor(e,this.options.headerClass))&&(this.activePanel=c.default.findAncestor(e,this.options.panelClass),this.toggle())}},{key:"loadFromUrlHash",value:function(){this.activePanel=h.default.getCurrentTabNodeFromUrlHash(),this.activePanel&&this.toggle()}},{key:"handleResize",value:function(){this.ww!==c.default.windowWidth()&&(this.recalculateHeights(),this.activePanel&&c.default.show(this.activePanel.data.content,this.activePanel.data),this.ww=c.default.windowWidth())}},{key:"setAccesibility",value:function(){for(var t=0;t<this.headers.length;t+=1){var e=this.headers[t],n=e.nextElementSibling,i=e.getAttribute("id"),a=void 0;i?(a=i+"-content",c.default.setAttr(e,"aria-controls",a),c.default.setAttr(e,"aria-expanded",!1),c.default.setAttr(e,"href","#"+a),c.default.setAttr(n,"id",a),c.default.setAttr(n,"aria-labelledby",i)):this.accesibility=!1}}},{key:"calculateStyles",value:function(){var t=this;this.panels.forEach(function(e){var n=e.querySelector("."+t.options.contentClass),i=e.querySelector("."+t.options.contentInnerClass),a=e.querySelector("."+t.options.headerClass);c.default.saveData(e,{height:c.default.getHeight(i),contentCanvas:i,content:n,header:a,isOpen:!1})})}},{key:"recalculateHeights",value:function(){this.panels.forEach(function(t){t.data.height=c.default.getHeight(t.data.contentCanvas)})}},{key:"toggle",value:function(){this.activePanel.data.isOpen?(this.closePanel(this.activePanel),this.activePanel=!1):(this.openPanel(this.activePanel),this.options.closeOthers&&this.closeOthers(),this.options.scrollToPanelOnClick&&this.handleScroll())}},{key:"closePanel",value:function(t){c.default.hide(t.data.content),c.default.removeClass(t,this.options.activePanelClass),c.default.setAttr(t.data.header,"aria-expanded",!1),this.options.hashUrl&&h.default.removeUrlHash(),t.data.isOpen=!1}},{key:"openPanel",value:function(t){c.default.show(t.data.content,t.data),c.default.addClass(t,this.options.activePanelClass),c.default.setAttr(t.data.header,"aria-expanded",!0),this.options.hashUrl&&h.default.updateUrlHash(t.data.header),t.data.isOpen=!0}},{key:"closeOthers",value:function(){var t=this,e=c.default.siblings(this.activePanel,this.options.panelClass);e.length&&e.forEach(function(e){c.default.removeClass(e,t.options.activePanelClass),c.default.setAttr(e.data.header,"aria-expanded",!1),c.default.hide(e.data.content),e.data.isOpen=!1})}},{key:"handleScroll",value:function(){if(this.options.scrollToPanelOnClick&&c.default.isMobile().any()||"all"===this.options.scrollToPanelOnClick){var t=document.body.getBoundingClientRect(),e=this.activePanel.getBoundingClientRect(),n=e.top-t.top;this.options.closeOthers&&setTimeout(function(){window.scrollTo(0,n)},this.transitionTime+5)}}},{key:"openAll",value:function(){var t=this;this.panels.forEach(function(e){t.openPanel(e)})}},{key:"closeAll",value:function(){var t=this;this.panels.forEach(function(e){t.closePanel(e)})}},{key:"open",value:function(t){if(!this.panels[t])throw new Error('Panel with index "'+t+'" does not exist');this.openPanel(this.panels[t])}},{key:"close",value:function(t){if(!this.panels[t])throw new Error('Panel with index "'+t+'" does not exist');this.closePanel(this.panels[t])}},{key:"getPanelsState",value:function(){var t=[];return this.panels.forEach(function(e){t.push({el:e,height:e.data.height,isOpen:e.data.isOpen})}),t}}]),t}();window.Concertina=d,e.default=d},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getNodes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].slice.call(e.querySelectorAll(t))},siblings:function(t,e){var n=this;return[].filter.call(t.parentNode.children,function(i){return i!==t&&n.hasClass(i,e)})},hasAncestor:function(t,e){for(;(t=t.parentNode)&&!t.classList.contains(e);)if("BODY"===t.nodeName)return!1;return!0},findAncestor:function(t,e){for(;(t=t.parentNode)&&!t.classList.contains(e);)if("BODY"===t.nodeName)return!1;return t},addClass:function(t,e){if(t.length)for(var n=0;n<t.length;n+=1)t[n].classList.add(e);else t.classList.add(e)},removeClass:function(t,e){if(t.length)for(var n=0;n<t.length;n+=1)t[n].classList.remove(e);else t.classList.remove(e)},hasClass:function(t,e){return t.classList.contains(e)},isMobile:function(){return{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}}},windowWidth:function(){var t=window,e=document,n=e.documentElement,i=e.getElementsByTagName("body")[0];return t.innerWidth||n.clientWidth||i.clientWidth},saveData:function(t,e){t.data=e},getStyle:function(t,e){return window.getComputedStyle(t).getPropertyValue(e)},getHeight:function(t){return parseInt(this.getStyle(t,"padding-top"))+parseInt(this.getStyle(t,"padding-bottom"))+parseInt(this.getStyle(t,"height"))+"px"},setAttr:function(t,e,n){if(t.length)for(var i=0;i<t.length;i+=1)t[i].setAttribute(e,n);else t.setAttribute(e,n)},hide:function(t){if(t.length)for(var e=0;e<t.length;e+=1){var n=t[e].style;n.maxHeight=0}else{t.style.maxHeight=0}},show:function(t,e){t.style.maxHeight=e.height},debounce:function(t,e){var n=void 0;return function(){var i=this,a=arguments,o=function(){return t.apply(i,a)};clearTimeout(n),n=setTimeout(o,e)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getCurrentTabNodeFromUrlHash:function(){var t=window.location.hash,e=void 0,n=void 0;return t&&(e=t.replace("#",""),n=document.getElementById(e)),n?n.parentNode:null},updateUrlHash:function(t){var e=t.getAttribute("id");history.replaceState(null,null,"#"+e)},removeUrlHash:function(){history.replaceState({},document.title,".")}}}])});