!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("concertina.js",[],e):"object"==typeof exports?exports["concertina.js"]=e():t["concertina.js"]=e()}(this,function(){return function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author Milad Alizadeh <hello@mili.london>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @version 0.1
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @copyright 2017
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @license Released under the MIT License.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */
n(1);var r=n(2),l=a(r),c=n(3),u=a(c),h=function(){function t(e){var n=this;i(this,t),this.setOptions(e),this.wrappers=l.default.getNodes("."+this.options.wrapperClass),this.allContent=l.default.getNodes("."+this.options.contentClass),this.headers=l.default.getNodes("."+this.options.headerClass),this.setPanels(),this.wrappers.length&&(this.calculateStyles(),this.setListeners(),this.options.handleUrlHash&&this.loadFromUrlHash(),this.setAccesibility(),this.setTransitionClass(),this.transitionTime=this.getTransitionDuration(),window.onload=function(){n.recalculateHeights()})}return o(t,[{key:"setOptions",value:function(t){var e={wrapperClass:"js-concertina",transitionClass:"c-concertina--has-transition",panelClass:"c-concertina__panel",activePanelClass:"c-concertina__panel--is-active",headerClass:"c-concertina__header",titleClass:"c-concertina__title",contentClass:"c-concertina__content",contentCanvasClass:"c-concertina__content-canvas",handleHashUrl:!1,scrollToPanelOnClick:"mobile",transition:!1,closeOthers:!0};this.options=s({},e,t)}},{key:"setTransitionClass",value:function(){this.options.transition&&l.default.addClass(this.wrappers,this.options.transitionClass)}},{key:"getTransitionDuration",value:function(){var t=l.default.getStyle(this.allContent[0],"transition-duration");if("0s"===t)throw new Error("You should set transition-duration on the '."+this.options.contentClass+'\' element in your css file or disable transition by setting "transition" option to false in the constructor');return 1e3*t.replace("s","")}},{key:"setPanels",value:function(){var t=this;this.wrappers.forEach(function(e){if(t.panels=l.default.getNodes("."+t.options.panelClass),!t.panels.length)throw new Error("Please provide a panel wrapper (default: "+t.options.panelClass+") for each accordion item")})}},{key:"setListeners",value:function(){var t=this;this.wrappers.forEach(function(e){e.addEventListener("click",function(e){return t.handleItemClick(e)})}),window.addEventListener("resize",l.default.debounce(function(){return t.handleResize()},300))}},{key:"handleItemClick",value:function(t){var e=t.target;t.preventDefault(),(l.default.hasClass(e,this.options.headerClass)||l.default.hasAncestor(e,this.options.headerClass))&&(this.activePanel=l.default.findAncestor(e,this.options.panelClass),this.toggle())}},{key:"loadFromUrlHash",value:function(){this.activePanel=u.default.getCurrentTabNodeFromUrlHash(),this.activePanel&&this.toggle()}},{key:"handleResize",value:function(){this.ww!==l.default.windowWidth()&&(this.recalculateHeights(),this.activePanel&&l.default.show(this.activePanel.data.content,this.activePanel.data),this.ww=l.default.windowWidth())}},{key:"setAccesibility",value:function(){for(var t=0;t<this.headers.length;t+=1){var e=this.headers[t],n=e.nextElementSibling,a=e.getAttribute("id"),i=void 0;a?(i=a+"-content",l.default.setAttr(e,"aria-controls",i),l.default.setAttr(e,"aria-expanded",!1),l.default.setAttr(e,"href","#"+i),l.default.setAttr(n,"id",i),l.default.setAttr(n,"aria-labelledby",a)):this.accesibility=!1}}},{key:"calculateStyles",value:function(){var t=this;this.panels.forEach(function(e){var n=e.querySelector("."+t.options.contentClass),a=e.querySelector("."+t.options.contentCanvasClass),i=e.querySelector("."+t.options.headerClass);l.default.saveData(e,{height:l.default.getHeight(a),contentCanvas:a,content:n,header:i})})}},{key:"recalculateHeights",value:function(){this.panels.forEach(function(t){t.data.height=l.default.getHeight(t.data.contentCanvas)})}},{key:"toggle",value:function(){this.activePanel.data.isOpen?this.closePanel():(this.openPanel(),this.options.closeOthers&&this.closeOthers(),this.options.scrollToPanelOnClick&&this.handleScroll())}},{key:"closePanel",value:function(){l.default.hide(this.activePanel.data.content),l.default.removeClass(this.activePanel,this.options.activePanelClass),l.default.setAttr(this.activePanel.data.header,"aria-expanded",!1),this.options.handleUrlHash&&u.default.removeUrlHash(),this.activePanel.data.isOpen=!1,this.activePanel=!1}},{key:"openPanel",value:function(){l.default.show(this.activePanel.data.content,this.activePanel.data),l.default.addClass(this.activePanel,this.options.activePanelClass),l.default.setAttr(this.activePanel.data.header,"aria-expanded",!0),this.options.handleUrlHash&&u.default.updateUrlHash(this.activePanel.data.header),this.activePanel.data.isOpen=!0}},{key:"closeOthers",value:function(){var t=this,e=l.default.siblings(this.activePanel,this.options.panelClass);e.length&&e.forEach(function(e){l.default.removeClass(e,t.options.activePanelClass),l.default.setAttr(e.data.header,"aria-expanded",!1),l.default.hide(e.data.content),e.data.isOpen=!1})}},{key:"handleScroll",value:function(){if(this.options.scrollToPanelOnClick&&l.default.isMobile().any()||"all"===this.options.scrollToPanelOnClick){var t=document.body.getBoundingClientRect(),e=this.activePanel.getBoundingClientRect(),n=e.top-t.top;setTimeout(function(){window.scrollTo(0,n)},this.transitionTime+5)}}}]),t}();e.default=h},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getNodes:function(t){return[].slice.call(document.querySelectorAll(t))},siblings:function(t,e){var n=this;return[].filter.call(t.parentNode.children,function(a){return a!==t&&n.hasClass(a,e)})},hasAncestor:function(t,e){for(;(t=t.parentNode)&&!t.classList.contains(e);)if("BODY"===t.nodeName)return!1;return!0},findAncestor:function(t,e){for(;(t=t.parentNode)&&!t.classList.contains(e);)if("BODY"===t.nodeName)return!1;return t},addClass:function(t,e){if(t.length)for(var n=0;n<t.length;n+=1)t[n].classList.add(e);else t.classList.add(e)},removeClass:function(t,e){if(t.length)for(var n=0;n<t.length;n+=1)t[n].classList.remove(e);else t.classList.remove(e)},hasClass:function(t,e){return t.classList.contains(e)},isMobile:function(){return{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows()}}},windowWidth:function(){var t=window,e=document,n=e.documentElement,a=e.getElementsByTagName("body")[0];return t.innerWidth||n.clientWidth||a.clientWidth},saveData:function(t,e){t.data=e},getStyle:function(t,e){return window.getComputedStyle(t).getPropertyValue(e)},getHeight:function(t){return parseInt(this.getStyle(t,"padding-top"))+parseInt(this.getStyle(t,"padding-bottom"))+parseInt(this.getStyle(t,"height"))+"px"},setAttr:function(t,e,n){if(t.length)for(var a=0;a<t.length;a+=1)t[a].setAttribute(e,n);else t.setAttribute(e,n)},hide:function(t){if(t.length)for(var e=0;e<t.length;e+=1){var n=t[e].style;n.maxHeight=0}else{t.style.maxHeight=0}},show:function(t,e){t.style.maxHeight=e.height},debounce:function(t,e){var n=void 0;return function(){var a=this,i=arguments,s=function(){return t.apply(a,i)};clearTimeout(n),n=setTimeout(s,e)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getCurrentTabNodeFromUrlHash:function(){var t=window.location.hash,e=void 0,n=void 0;return t&&(e=t.replace("#",""),n=document.getElementById(e)),n?n.parentNode:null},updateUrlHash:function(t){var e=t.getAttribute("id");history.replaceState(null,null,"#"+e)},removeUrlHash:function(){history.replaceState({},document.title,".")}}}])});